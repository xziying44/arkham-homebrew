4. - 根据您提供的文档格式，我来编写卡牌导出接口的文档：
   
     # 卡牌导出接口文档
   
     ## 28. 导出卡牌
   
     ### 基本信息
   
     - **接口名称**: 导出卡牌
     - **请求地址**: `/api/export-card`
     - **请求方法**: `POST`
     - **功能描述**: 根据指定的导出参数将卡牌导出为图片文件，支持多种格式和出血设置
   
     ### 请求参数
   
     | 参数名          | 类型   | 必填 | 说明                                                         |
     | --------------- | ------ | ---- | ------------------------------------------------------------ |
     | card_path       | string | 是   | 卡牌文件相对路径（例如：a.card 或 d/a.card）                 |
     | export_filename | string | 是   | 导出文件名（不包含扩展名，扩展名根据导出格式自动添加）       |
     | export_params   | object | 是   | 导出参数对象，包含格式、尺寸、DPI、出血等设置                |
     | params_hash     | string | 是   | 导出参数的哈希值，用于缓存判断，相同哈希值可复用ExportHelper对象 |
   
     ### export_params 参数详情
   
     | 参数名      | 类型   | 默认值     | 说明                                        |
     | ----------- | ------ | ---------- | ------------------------------------------- |
     | format      | string | "PNG"      | 导出格式，支持 "PNG" 或 "JPG"               |
     | quality     | int    | 95         | JPG格式的质量（0-100），仅JPG格式有效       |
     | size        | string | "扑克尺寸" | 导出规格，支持多种预设尺寸                  |
     | dpi         | int    | 300        | 导出DPI分辨率                               |
     | bleed       | int    | 2          | 出血规格（单位：mm），支持 0、2、3          |
     | bleed_mode  | string | "裁剪"     | 出血模式，支持 "裁剪" 或 "拉伸"             |
     | bleed_model | string | "镜像出血" | 出血模型，支持 "镜像出血" 或 "LaMa模型出血" |
     | saturation  | float  | 1.0        | 饱和度调整因子（1.0表示不变）               |
     | brightness  | float  | 1.0        | 亮度调整因子（1.0表示不变）                 |
     | gamma       | float  | 1.0        | 伽马调整因子（1.0表示不变）                 |
   
     ### 支持的导出规格（size）
   
     | 规格值                          | 说明                 | 物理尺寸        |
     | ------------------------------- | -------------------- | --------------- |
     | "61mm × 88mm"                   | 61mm × 88mm          | 61.0mm × 88.0mm |
     | "61.5mm × 88mm"                 | 61.5mm × 88mm        | 61.5mm × 88.0mm |
     | "62mm × 88mm"                   | 62mm × 88mm          | 62.0mm × 88.0mm |
     | "63.5mm × 88.9mm (2.5″ × 3.5″)" | 标准扑克尺寸（默认） | 63.5mm × 88.9mm |
   
     ### 响应格式
   
     **成功响应**
     ```json
     {
       "code": 0,
       "msg": "卡牌导出成功",
       "data": null
     }
     ```
   
     **失败响应**
     ```json
     {
       "code": 12002,
       "msg": "卡牌导出失败",
       "data": null
     }
     ```
   
     ### 请求示例
   
     ```bash
     curl -X POST /api/export-card \
       -H "Content-Type: application/json" \
       -d '{
         "card_path": "调查员/罗兰.card",
         "export_filename": "罗兰_高清导出",
         "export_params": {
           "format": "PNG",
           "size": "63.5mm × 88.9mm (2.5″ × 3.5″)",
           "dpi": 600,
           "bleed": 3,
           "bleed_mode": "裁剪",
           "bleed_model": "LaMa模型出血",
           "saturation": 1.1,
           "brightness": 1.05,
           "gamma": 0.95
         },
         "params_hash": "a1b2c3d4e5f67890"
       }'
     ```
   
     ```bash
     curl -X POST /api/export-card \
       -H "Content-Type: application/json" \
       -d '{
         "card_path": "事件卡/急中生智.card",
         "export_filename": "急中生智_JPG",
         "export_params": {
           "format": "JPG",
           "quality": 90,
           "size": "61mm × 88mm",
           "dpi": 300,
           "bleed": 2,
           "bleed_mode": "拉伸",
           "bleed_model": "镜像出血"
         },
         "params_hash": "f0e1d2c3b4a59687"
       }'
     ```
   
     ### 示例响应
   
     **导出成功**
     ```json
     {
       "code": 0,
       "msg": "卡牌导出成功",
       "data": null
     }
     ```
   
     **卡牌文件不存在**
     ```json
     {
       "code": 12002,
       "msg": "卡牌导出失败",
       "data": null
     }
     ```
   
     **不支持的导出格式**
     ```json
     {
       "code": 12004,
       "msg": "不支持的导出格式: WEBP",
       "data": null
     }
     ```
   
     **缺少必要参数**
     ```json
     {
       "code": 12001,
       "msg": "请提供卡牌路径、导出文件名、导出参数和参数哈希",
       "data": null
     }
     ```
   
     ## 功能说明
   
     ### 导出流程
   
     1. **参数验证**: 检查导出参数的有效性和兼容性
     2. **缓存判断**: 根据参数哈希值决定是否复用现有的ExportHelper对象
     3. **卡牌生成**: 读取卡牌JSON数据并生成卡图
     4. **出血处理**: 根据出血设置进行图像扩展处理
     5. **文字渲染**: 在出血后的图像上绘制文字层
     6. **图像调整**: 应用饱和度、亮度、伽马等图像调整
     7. **文件保存**: 保存到工作空间的"导出"目录
   
     ### 保存路径
   
     导出的文件自动保存到工作目录下的"导出"文件夹：
     ```
     {工作空间路径}/export/{导出文件名}.{格式扩展名}
     ```
   
     如果"导出"目录不存在，系统会自动创建。
   
     ### 缓存机制
   
     - **参数哈希**: 使用相同的参数哈希可以复用ExportHelper对象，提高导出效率
     - **对象复用**: 相同的导出参数不会重复创建ExportHelper实例
     - **内存管理**: 长期不使用的ExportHelper对象会被垃圾回收
   
     ### 出血处理特性
   
     | 出血模型     | 说明                       | 适用场景                 |
     | ------------ | -------------------------- | ------------------------ |
     | 镜像出血     | 使用镜像方式扩展图像边缘   | 一般卡牌，速度较快       |
     | LaMa模型出血 | 使用AI模型智能填充图像边缘 | 高质量导出，需要LaMa服务 |
   
     | 出血模式 | 说明                           | 图像效果                   |
     | -------- | ------------------------------ | -------------------------- |
     | 裁剪     | 保持图片原始比例，裁剪多余部分 | 保持图像比例，可能损失内容 |
     | 拉伸     | 拉伸图片填满整个出血尺寸       | 完整填充，可能造成图像变形 |
   
     ## 错误码说明
   
     ### 卡牌导出相关错误码 (12001-12099)
   
     | 错误码 | 说明                                           |
     | ------ | ---------------------------------------------- |
     | 12001  | 请提供卡牌路径、导出文件名、导出参数和参数哈希 |
     | 12002  | 卡牌导出失败                                   |
     | 12003  | 导出卡牌失败（系统错误）                       |
     | 12004  | 不支持的导出格式                               |
     | 12005  | 卡牌路径不在工作目录内                         |
     | 12006  | 导出质量参数无效                               |
   
     ## 前置条件
   
     1. **工作空间**: 必须先选择或打开工作目录
     2. **卡牌文件**: 指定的卡牌文件必须存在且格式正确
     3. **导出参数**: 导出参数必须符合规范要求
     4. **LaMa服务**: 如果使用LaMa模型出血，需要LaMa服务正常运行
   
     ## 使用建议
   
     ### 性能优化
   
     1. **参数哈希**: 对相同的导出参数使用相同的哈希值以提高性能
     2. **批量导出**: 需要批量导出时，合理安排导出参数减少对象创建
     3. **分辨率选择**: 根据实际需求选择适当的DPI，避免不必要的资源消耗
   
     ### 质量设置
   
     | 使用场景   | 推荐设置                                                |
     | ---------- | ------------------------------------------------------- |
     | 屏幕预览   | DPI: 150-200, 格式: PNG, 质量: 默认                     |
     | 普通打印   | DPI: 300, 格式: PNG, 出血: 2mm, 出血模型: 镜像出血      |
     | 高质量印刷 | DPI: 600+, 格式: PNG, 出血: 3mm, 出血模型: LaMa模型出血 |
     | 网络分享   | DPI: 150-200, 格式: JPG, 质量: 80-90, 出血: 0mm         |
   
     ## 注意事项
   
     1. **文件权限**: 确保对工作空间目录有读写权限
     2. **磁盘空间**: 高DPI导出可能生成较大的文件，确保有足够的磁盘空间
     3. **LaMa服务**: LaMa模型出血需要额外的LaMa服务支持
     4. **字体缓存**: 文字渲染使用字体缓存机制，首次加载字体可能有延迟
     5. **内存使用**: 高分辨率导出可能消耗较多内存，建议分批处理大量导出
   
     ## 故障排除
   
     ### 常见问题
   
     1. **导出失败**
        - 检查卡牌文件路径是否正确
        - 确认卡牌JSON格式是否有效
   
     2. **图像质量差**
        - 提高DPI设置
        - 使用PNG格式代替JPG
        - 调整图像调整参数
   
     3. **出血效果不理想**
        - 尝试不同的出血模型
        - 调整出血尺寸
        - 检查原始图像质量
   
     4. **文字渲染问题**
        - 确认字体文件是否存在且可访问
        - 检查文字层元数据格式
   
     ### 性能问题
   
     1. **导出速度慢**
        - 降低DPI设置
        - 使用镜像出血代替LaMa模型出血
        - 复用ExportHelper对象（使用相同参数哈希）
   
     2. **内存占用高**
        - 减少同时导出的数量
        - 降低导出分辨率
        - 重启应用程序释放内存
   
     ## 技术支持
   
     如遇到问题，请提供以下信息以便排查：
     - 导出参数配置
     - 卡牌文件示例（脱敏后）
     - 错误日志或截图
     - 系统环境信息